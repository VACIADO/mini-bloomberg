<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Mini Bloomberg Pro â€“ Polmillone</title>
<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background-color: #121212;
  color: #fff;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  padding: 10px;
  justify-content: center;
}
.panel {
  border: 1px solid #444;
  border-radius: 8px;
  background-color: #1e1e1e;
  box-sizing: border-box;
  padding: 10px;
  flex: 1 1 45%;
  min-width: 300px;
  display: flex;
  flex-direction: column;
  height: 420px;
}
h2 {
  margin: 0 0 5px 0;
  text-align: center;
  font-size: 1.1rem;
}
.selector {
  margin-bottom: 5px;
  padding: 4px;
  background: #333;
  color: #fff;
  border: 1px solid #555;
  border-radius: 4px;
  font-size: 0.9rem;
}
.tradingview-widget-container {
  flex: 1;
  margin-top: 5px;
  border-radius: 6px;
  overflow: hidden;
}
#ia-console {
  width: 100%;
  background: #000;
  color: #0f0;
  font-family: monospace;
  padding: 6px;
  height: 120px;
  overflow-y: auto;
  font-size: 0.8rem;
  margin-top: 8px;
  border-radius: 4px;
  border: 1px solid #444;
}
#polmillone-chart {
  flex: 1;
  background-color: #111;
  border-radius: 6px;
}
</style>
</head>
<body>

<!-- PANEL EURO / CORRELADOS -->
<div class="panel">
  <h2>Euro / Correlados</h2>
  <select class="selector" id="sel_eurodolar"></select>
  <div class="tradingview-widget-container" id="tv_eurodolar"></div>
</div>

<!-- PANEL DXY / CORRELADOS -->
<div class="panel">
  <h2>DXY / Correlados</h2>
  <select class="selector" id="sel_dxy"></select>
  <div class="tradingview-widget-container" id="tv_dxy"></div>
</div>

<!-- PANEL CFD POLMILLONE -->
<div class="panel">
  <h2>CFD â€“ Polmillone</h2>
  <canvas id="polmillone-chart"></canvas>
  <div id="ia-console">Consola IA activaâ€¦</div>
</div>

<!-- TradingView -->
<script src="https://s3.tradingview.com/tv.js"></script>
<script>
// ðŸ”¹ SÃ­mbolos disponibles
const simbolosEuro = ["FX:EURUSD","TVC:EU10Y","OANDA:XAUUSD","TVC:UKOIL","BINANCE:BTCUSDT"];
const simbolosDXY = ["TVC:DXY","TVC:US10Y","NASDAQ:NDX","SP:SPX","TVC:VIX"];

// ðŸ”¹ Rellenar selectores
const selEuro = document.getElementById("sel_eurodolar");
const selDXY = document.getElementById("sel_dxy");
simbolosEuro.forEach(s => { let o = document.createElement("option"); o.value = s; o.text = s; selEuro.appendChild(o); });
simbolosDXY.forEach(s => { let o = document.createElement("option"); o.value = s; o.text = s; selDXY.appendChild(o); });

// ðŸ”¹ Crear widget TradingView
function crearWidget(symbol, containerId){
  document.getElementById(containerId).innerHTML = "";
  new TradingView.widget({
    container_id: containerId,
    symbol: symbol,
    interval: "60",
    timezone: "Europe/Madrid",
    theme: "dark",
    style: "1",
    locale: "es",
    hide_top_toolbar: true,
    width: "100%",
    height: "100%"
  });
}

// ðŸ”¹ Inicializar
crearWidget(selEuro.value, "tv_eurodolar");
crearWidget(selDXY.value, "tv_dxy");

// ðŸ”¹ Cambiar sÃ­mbolos dinÃ¡micamente
selEuro.addEventListener("change", ()=> crearWidget(selEuro.value,"tv_eurodolar"));
selDXY.addEventListener("change", ()=> crearWidget(selDXY.value,"tv_dxy"));

// ðŸ”¹ Consola IA
const consoleDiv = document.getElementById("ia-console");
function logConsole(msg){
  consoleDiv.innerText += "\n" + msg;
  consoleDiv.scrollTop = consoleDiv.scrollHeight;
}

// ðŸ”¹ CFD Polmillone: grÃ¡fico sintÃ©tico
const canvas = document.getElementById("polmillone-chart");
const ctx = canvas.getContext("2d");
canvas.width = canvas.offsetWidth;
canvas.height = canvas.offsetHeight;

let datos = [];
function generarDato(){
  // Simula Euro vs DÃ³lar
  let cambio = (Math.random()-0.5)*2; // -1 a +1
  if(datos.length>canvas.width) datos.shift();
  datos.push(cambio);
}

// ðŸ”¹ Dibujar Polmillone
function dibujarPolmillone(){
  ctx.fillStyle = "#111";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.beginPath();
  ctx.moveTo(0, canvas.height/2);
  for(let i=0;i<datos.length;i++){
    let y = canvas.height/2 - datos[i]*40;
    ctx.lineTo(i, y);
  }
  ctx.strokeStyle = "#0f0";
  ctx.lineWidth = 2;
  ctx.stroke();
}

// ðŸ”¹ Loop
setInterval(()=>{
  generarDato();
  dibujarPolmillone();
  // Consola aleatoria
  const mensajes = [
    "Euro con ligera presiÃ³n alcista",
    "DÃ³lar presiona fuerte",
    "CorrelaciÃ³n Euro/DXY estable",
    "Bonos y Nasdaq sin movimientos"
  ];
  logConsole(mensajes[Math.floor(Math.random()*mensajes.length)]);
}, 1000);
</script>

</body>
</html>
