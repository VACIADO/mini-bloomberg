<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Mini Bloomberg Pro</title>
<style>
body { 
  margin: 0;
  font-family: Arial, sans-serif;
  background-color: #121212;
  color: #fff;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  padding: 10px;
  justify-content: center;
}

.panel {
  border: 1px solid #444;
  border-radius: 8px;
  background-color: #1e1e1e;
  box-sizing: border-box;
  padding: 10px;
  flex: 1 1 45%;
  min-width: 300px;
  display: flex;
  flex-direction: column;
  height: 420px;
}

h2 {
  margin: 0 0 5px 0;
  text-align: center;
  font-size: 1.1rem;
}

.tradingview-widget-container {
  flex: 1;
  margin-top: 5px;
  border-radius: 6px;
  overflow: hidden;
}

#ia-console {
  width: 100%;
  background: #000;
  color: #0f0;
  font-family: monospace;
  padding: 6px;
  height: 120px;
  overflow-y: auto;
  font-size: 0.8rem;
  margin-top: 8px;
  border-radius: 4px;
  border: 1px solid #444;
}
</style>
</head>
<body>

<!-- PANEL EURO / CORRELADOS -->
<div class="panel" id="panel-eurodolar">
  <h2>Euro / Correlados</h2>
  <div class="tradingview-widget-container" id="tv_eurodolar"></div>
  <div class="tradingview-widget-container" id="tv_bono_eu"></div>
  <div class="tradingview-widget-container" id="tv_oro"></div>
  <div class="tradingview-widget-container" id="tv_brent"></div>
  <div class="tradingview-widget-container" id="tv_btc"></div>
</div>

<!-- PANEL DXY / CORRELADOS -->
<div class="panel" id="panel-dxy">
  <h2>DXY / Correlados</h2>
  <div class="tradingview-widget-container" id="tv_dxy"></div>
  <div class="tradingview-widget-container" id="tv_bono_us"></div>
  <div class="tradingview-widget-container" id="tv_nasdaq"></div>
  <div class="tradingview-widget-container" id="tv_sp500"></div>
  <div class="tradingview-widget-container" id="tv_vix"></div>
</div>

<!-- PANEL CFD POLMILLONE -->
<div class="panel" id="panel-cfd">
  <h2>CFD - Polmillone</h2>
  <div class="tradingview-widget-container" id="tv_cfd"></div>
  <div id="ia-console">Consola de IA activa... Analizando correlaciones Euro vs D√≥lar</div>
</div>

<!-- TradingView JS -->
<script src="https://s3.tradingview.com/tv.js"></script>
<script>
// Funci√≥n para crear cada widget de TradingView
function crearWidget(symbol, containerId) {
  document.getElementById(containerId).innerHTML = "";
  new TradingView.widget({
    container_id: containerId,
    symbol: symbol,
    interval: "60",
    timezone: "Europe/Madrid",
    theme: "dark",
    style: "1",
    locale: "es",
    hide_top_toolbar: true,
    width: "100%",
    height: "100%"
  });
}

// Funci√≥n para escribir en la consola de IA
function logConsole(text) {
  const consoleDiv = document.getElementById('ia-console');
  consoleDiv.innerText += '\n' + text;
  consoleDiv.scrollTop = consoleDiv.scrollHeight;
}

// üî• Configuraci√≥n de s√≠mbolos de todos los gr√°ficos üî•
const widgets = {
  // Equipo Euro
  tv_eurodolar: "FX:EURUSD",
  tv_bono_eu: "TVC:EU10Y",
  tv_oro: "OANDA:XAUUSD",
  tv_brent: "TVC:UKOIL",
  tv_btc: "BINANCE:BTCUSDT",
  // Equipo D√≥lar
  tv_dxy: "TVC:DXY",
  tv_bono_us: "TVC:US10Y",
  tv_nasdaq: "NASDAQ:NDX",
  tv_sp500: "SP:SPX",
  tv_vix: "TVC:VIX"
};

// Inicializamos todos los gr√°ficos
for (const id in widgets) {
  crearWidget(widgets[id], id);
}

// CFD Polmillone autom√°tico: diferencia promedio Euro vs D√≥lar
function actualizarCFD() {
  // Simulaci√≥n: calculamos un valor random para cada equipo
  const euro = Math.random() * 100 + 100; // valor del equipo Euro
  const dolar = Math.random() * 100 + 100; // valor del equipo D√≥lar
  const diferencia = euro - dolar;
  
  // Creamos un gr√°fico simple tipo barra en canvas
  const container = document.getElementById("tv_cfd");
  container.innerHTML = '<canvas id="cfdChart" width="400" height="200"></canvas>';
  const ctx = document.getElementById("cfdChart").getContext("2d");
  ctx.clearRect(0,0,400,200);

  // Fondo
  ctx.fillStyle = "#1e1e1e";
  ctx.fillRect(0,0,400,200);

  // Euro barra
  ctx.fillStyle = "#4CAF50";
  ctx.fillRect(50,200 - euro, 50, euro);

  // D√≥lar barra
  ctx.fillStyle = "#F44336";
  ctx.fillRect(150,200 - dolar, 50, dolar);

  // Diferencia l√≠nea
  ctx.strokeStyle = "#FFD700";
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(0, 100 - diferencia/2);
  ctx.lineTo(400, 100 - diferencia/2);
  ctx.stroke();

  logConsole(`CFD actualizado: Euro ${euro.toFixed(1)} vs D√≥lar ${dolar.toFixed(1)} ‚Üí Dif ${diferencia.toFixed(1)}`);
}

// Actualizamos el CFD cada 5 segundos
setInterval(actualizarCFD, 5000);

// Simulaci√≥n de mensajes de IA cada 8 segundos
setInterval(() => {
  const mensajes = [
    "EUR/USD y DXY correlaci√≥n negativa detectada üìâ",
    "BTC sigue tendencia alcista con volatilidad alta üöÄ",
    "S&P500 y Nasdaq muestran movimientos sincronizados üìä",
    "Brent y Oro sin correlaci√≥n significativa ‚öñÔ∏è"
  ];
  logConsole(mensajes[Math.floor(Math.random() * mensajes.length)]);
}, 8000);

</script>
</body>
</html>
